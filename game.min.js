var stage=new PIXI.Stage(0x000);var stageProperties={width:640,height:480}
var renderer=PIXI.autoDetectRenderer(stageProperties.width,stageProperties.height);document.body.appendChild(renderer.view);var arrowKeys={left:false,right:false,up:false,down:false,w:false,a:false,s:false,d:false};var specialKeys={space:false,q:false};var playerPhysicalProps={jumping:false,velX:0,velY:0};requestAnimFrame(animate);var playerTexture=PIXI.Texture.fromImage("img/player0.png");var player=new PIXI.Sprite(playerTexture);player.anchor.x=0.5;player.anchor.y=0.5;player.position.x=stageProperties.width/2;player.position.y=stageProperties.height/2;player.scale.x=0.5;player.scale.y=0.5;stage.addChild(player);function animate(){requestAnimFrame(animate);var gravity=5;var friction=0.8;if(player.y>=stageProperties.height-player.height/2){}else{player.y+=gravity;}
var speed=3;if(arrowKeys.left==true||arrowKeys.a==true){if(playerPhysicalProps.velX>-speed){playerPhysicalProps.velX--;}}
if(arrowKeys.right==true||arrowKeys.d==true){if(playerPhysicalProps.velX<speed){playerPhysicalProps.velX++;}}
if(arrowKeys.up==true||arrowKeys.w==true){if(!playerPhysicalProps.jumping){playerPhysicalProps.jumping=true;player.y=stageProperties.height-player.height*2;}
}
if(arrowKeys.down==true||arrowKeys.s==true){}
player.velX*=friction;player.x+=playerPhysicalProps.velX;player.y+=playerPhysicalProps.velY; if(player.y>=stageProperties.height-player.height/2){player.y=stageProperties.height-player.height;playerPhysicalProps.jumping=false;} 
renderer.render(stage);}
Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];while((ax=this.indexOf(what))!==-1){this.splice(ax,1);}}
return this;};function generatePointByAngle(angle,distance,startPoint){angle=angle*(Math.PI/180)
var addedX=Math.cos(angle)*distance;var addedY=Math.sin(angle)*distance;var point={x:startPoint.x+addedX,y:startPoint.y+addedY}
return point;}
function normalizeRotation(rotationVal){rotationVal=rotationVal*(180/Math.PI);if(rotationVal>360){rotationVal-=360;}
if(rotationVal<0){rotationVal+=360;}
return rotationVal;}
function ccpAdd(point1,point2){var addedPointX=point1.x+point2.x;var addedPointY=point1.y+point2.y;var addedPoint={x:addedPointX,y:addedPointY}
return addedPoint;}
$(document).keydown(function(evt){if(evt.which==37){arrowKeys.left=true;}
if(evt.which==39){arrowKeys.right=true;}
if(evt.which==38){arrowKeys.up=true;}
if(evt.which==40){arrowKeys.down=true;}
if(evt.which==87){arrowKeys.w=true;}
if(evt.which==65){arrowKeys.a=true;}
if(evt.which==83){arrowKeys.s=true;}
if(evt.which==68){arrowKeys.d=true;} 
if(evt.which==32){specialKeys.space=true;}
if(evt.which==81){specialKeys.q=true;}});$(document).keyup(function(evt){if(evt.which==37){arrowKeys.left=false;}
if(evt.which==39){arrowKeys.right=false;}
if(evt.which==38){arrowKeys.up=false;}
if(evt.which==40){arrowKeys.down=false;}
if(evt.which==87){arrowKeys.w=false;}
if(evt.which==65){arrowKeys.a=false;}
if(evt.which==83){arrowKeys.s=false;}
if(evt.which==68){arrowKeys.d=false;} 
if(evt.which==32){specialKeys.space=false;}
if(evt.which==81){specialKeys.q=false;}});